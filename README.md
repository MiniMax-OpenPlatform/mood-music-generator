# å¿ƒæƒ…éŸ³ä¹ç”Ÿæˆå™¨ ğŸµ

åŸºäº MiniMax AI çš„å¿ƒæƒ…éŸ³ä¹ç”Ÿæˆåº”ç”¨ã€‚æ”¯æŒ Web ç½‘é¡µç‰ˆå’Œ Android ç§»åŠ¨ç«¯ï¼Œç”¨æˆ·è¾“å…¥å½“å‰å¿ƒæƒ…å’Œ API Keyï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆä¸€é¦–ç¬¦åˆå¿ƒæƒ…çš„åŸåˆ›éŸ³ä¹ï¼ŒåŒ…å«æ­Œè¯å’ŒéŸ³é¢‘ï¼Œå¯ç”¨äºåˆ†äº«å’Œæ”¶è—ã€‚

## ğŸ“± å¿«é€Ÿä¸‹è½½ Android åº”ç”¨

### æ–¹å¼ 1ï¼šç›´æ¥ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼ˆæ¨èï¼‰

è®¿é—® [Releases é¡µé¢](https://github.com/MiniMax-OpenPlatform/mood-music-generator/releases/latest) ä¸‹è½½æœ€æ–°çš„ APK å®‰è£…åŒ…ï¼š

- **app-arm64-v8a-release.apk** - é€‚ç”¨äºå¤§å¤šæ•°æ–°è®¾å¤‡ï¼ˆæ¨èï¼‰
- **app-armeabi-v7a-release.apk** - é€‚ç”¨äºè¾ƒæ—§çš„è®¾å¤‡
- **app-x86_64-release.apk** - é€‚ç”¨äºæ¨¡æ‹Ÿå™¨

### æ–¹å¼ 2ï¼šæŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬

è®¿é—® [æ‰€æœ‰ Releases](https://github.com/MiniMax-OpenPlatform/mood-music-generator/releases) æŸ¥çœ‹å†å²ç‰ˆæœ¬

### Android å®‰è£…æ­¥éª¤

1. ä¸‹è½½é€‚åˆä½ è®¾å¤‡çš„ APK æ–‡ä»¶
2. åœ¨æ‰‹æœºè®¾ç½®ä¸­å…è®¸"å®‰è£…æœªçŸ¥æ¥æºçš„åº”ç”¨"
3. æ‰“å¼€ä¸‹è½½çš„ APK æ–‡ä»¶è¿›è¡Œå®‰è£…
4. å®‰è£…å®Œæˆåæ‰“å¼€åº”ç”¨
5. è¾“å…¥ MiniMax API Key å¼€å§‹ä½¿ç”¨

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### å…±åŒç‰¹æ€§
- ğŸ­ **æ™ºèƒ½å¿ƒæƒ…åˆ†æ**ï¼šä½¿ç”¨ MiniMax LLM ç†è§£ç”¨æˆ·å¿ƒæƒ…
- ğŸ¼ **è‡ªåŠ¨éŸ³ä¹åˆ›ä½œ**ï¼šæ ¹æ®å¿ƒæƒ…ç”ŸæˆéŸ³ä¹é£æ ¼æç¤ºè¯
- ğŸ“ **æ­Œè¯åˆ›ä½œ**ï¼šè‡ªåŠ¨ç”Ÿæˆç¬¦åˆå¿ƒæƒ…çš„è¯—æ„æ­Œè¯
- ğŸµ **éŸ³ä¹ç”Ÿæˆ**ï¼šè°ƒç”¨ MiniMax Music API ç”Ÿæˆé«˜è´¨é‡éŸ³é¢‘
- ğŸ”’ **å‰ç«¯è¾“å…¥ API Key**ï¼šæ— éœ€é…ç½®æ–‡ä»¶ï¼Œç›´æ¥åœ¨ç•Œé¢è¾“å…¥
- ğŸ“¥ **ä¸‹è½½åŠŸèƒ½**ï¼šæ”¯æŒä¸‹è½½ç”Ÿæˆçš„éŸ³ä¹
- ğŸ“¤ **ç¤¾äº¤åˆ†äº«**ï¼šä¸€é”®åˆ†äº«ä½ çš„ä¸“å±éŸ³ä¹

### Web ç‰ˆç‰¹æ€§
- ğŸŒ **è·¨å¹³å°è®¿é—®**ï¼šæ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾æ”¯æŒæ‰‹æœºå’Œç”µè„‘è®¿é—®
- ğŸ¨ **ç²‰çº¢è‰²ä¸»é¢˜**ï¼šç°ä»£åŒ–æ¸å˜è®¾è®¡

### Android ç‰ˆç‰¹æ€§
- ğŸ“± **åŸç”Ÿä½“éªŒ**ï¼šæµç•…çš„ç§»åŠ¨ç«¯æ“ä½œ
- ğŸ¨ **ç²‰çº¢è‰²ä¸»é¢˜**ï¼šç¾è§‚çš„æ¸å˜ç•Œé¢è®¾è®¡
- ğŸµ **å†…ç½®æ’­æ”¾å™¨**ï¼šæ”¯æŒæš‚åœã€è¿›åº¦æ§åˆ¶
- âš¡ **å¿«é€Ÿå¯åŠ¨**ï¼šéšæ—¶éšåœ°ç”ŸæˆéŸ³ä¹
- ğŸ”„ **å®æ—¶è¿›åº¦**ï¼šå¯è§†åŒ–åˆ›ä½œæ­¥éª¤

## ğŸš€ Web ç‰ˆå¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Python 3.8+
- MiniMax API Keyï¼ˆä» [MiniMax å¹³å°](https://platform.minimaxi.com/user-center/basic-information/interface-key) è·å–ï¼‰

### 2. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 3. è¿è¡ŒæœåŠ¡

**æ— éœ€é…ç½® .env æ–‡ä»¶**ï¼Œç›´æ¥å¯åŠ¨ï¼š

```bash
python3 main.py
```

æˆ–ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š

```bash
./start.sh
```

æˆ–ä½¿ç”¨ uvicornï¼ˆå¼€å‘æ¨¡å¼ï¼‰ï¼š

```bash
uvicorn main:app --host 0.0.0.0 --port 5111 --reload
```

### 4. è®¿é—®åº”ç”¨

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š

```
http://localhost:5111
```

å¦‚æœæ˜¯è¿œç¨‹æœåŠ¡å™¨ï¼š

```
http://æœåŠ¡å™¨IP:5111
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### Web ç‰ˆ

1. åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åº”ç”¨
2. **è¾“å…¥ä½ çš„ MiniMax API Key**ï¼ˆåœ¨ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†ï¼‰
3. åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥ä½ å½“å‰çš„å¿ƒæƒ…æè¿°
4. æˆ–ç‚¹å‡»å¿«é€Ÿé€‰æ‹©æŒ‰é’®é€‰æ‹©é¢„è®¾å¿ƒæƒ…
5. ç‚¹å‡»"ç”Ÿæˆæˆ‘çš„ä¸“å±éŸ³ä¹"æŒ‰é’®
6. ç­‰å¾… AI ç”Ÿæˆï¼ˆé€šå¸¸éœ€è¦ 30-120 ç§’ï¼‰
7. æ’­æ”¾ã€ä¸‹è½½æˆ–åˆ†äº«ä½ çš„ä¸“å±éŸ³ä¹

### Android ç‰ˆ

1. æ‰“å¼€å¿ƒæƒ…éŸ³ä¹ç”Ÿæˆå™¨åº”ç”¨
2. **è¾“å…¥ä½ çš„ MiniMax API Key**
3. æè¿°ä½ çš„å¿ƒæƒ…ï¼Œæˆ–é€‰æ‹©å¿«æ·å¿ƒæƒ…æ ‡ç­¾ï¼ˆå¼€å¿ƒã€éš¾è¿‡ã€å¹³é™ç­‰ï¼‰
4. ç‚¹å‡»"ğŸµ ç”Ÿæˆæˆ‘çš„éŸ³ä¹"æŒ‰é’®
5. ç­‰å¾…åˆ›ä½œè¿‡ç¨‹ï¼ˆåˆ†æå¿ƒæƒ… â†’ åˆ›ä½œæ­Œè¯ â†’ ç”ŸæˆéŸ³ä¹ â†’ å¤„ç†éŸ³é¢‘ï¼‰
6. æ’­æ”¾ã€åˆ†äº«æˆ–é‡æ–°ç”Ÿæˆ

## ğŸ”‘ è·å– API Key

1. è®¿é—® [MiniMax ç”¨æˆ·ä¸­å¿ƒ](https://platform.minimaxi.com/user-center/basic-information/interface-key)
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. åœ¨æ§åˆ¶å°åˆ›å»º API Key
4. ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„ä½™é¢
5. åœ¨åº”ç”¨ä¸­è¾“å…¥ API Key å³å¯ä½¿ç”¨

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
mood-music-generator/
â”œâ”€â”€ main.py                     # FastAPI Web æœåŠ¡
â”œâ”€â”€ requirements.txt            # Python ä¾èµ–
â”œâ”€â”€ templates/                  # Web æ¨¡æ¿
â”‚   â””â”€â”€ index.html             # Web ä¸»é¡µé¢
â”œâ”€â”€ static/                     # Web é™æ€èµ„æº
â”‚   â”œâ”€â”€ css/style.css          # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ js/app.js              # å‰ç«¯é€»è¾‘
â”œâ”€â”€ temp_sessions/              # ä¸´æ—¶éŸ³é¢‘æ–‡ä»¶å­˜å‚¨
â”œâ”€â”€ mood_music_app/             # Flutter Android åº”ç”¨
â”‚   â”œâ”€â”€ lib/                   # Dart æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ main.dart          # åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ screens/           # ç•Œé¢é¡µé¢
â”‚   â”‚   â”œâ”€â”€ widgets/           # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/          # API æœåŠ¡
â”‚   â”‚   â””â”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ android/               # Android åŸç”Ÿé…ç½®
â”‚   â”œâ”€â”€ assets/                # åº”ç”¨èµ„æº
â”‚   â””â”€â”€ pubspec.yaml           # Flutter ä¾èµ–é…ç½®
â””â”€â”€ .github/workflows/          # CI/CD è‡ªåŠ¨åŒ–
    â”œâ”€â”€ build-apk.yml          # Android APK æ„å»º
    â””â”€â”€ build-ios.yml          # iOS IPA æ„å»º
```

## ğŸ”§ æŠ€æœ¯æ ˆ

### Web ç‰ˆ
- **åç«¯**ï¼šFastAPI + Python
- **å‰ç«¯**ï¼šHTML5 + CSS3 + Vanilla JavaScript

### Android ç‰ˆ
- **æ¡†æ¶**ï¼šFlutter 3.19.0
- **è¯­è¨€**ï¼šDart
- **UI åº“**ï¼šMaterial Design 3
- **ç½‘ç»œ**ï¼šDio (HTTP Client)
- **éŸ³é¢‘**ï¼šaudioplayers
- **çŠ¶æ€ç®¡ç†**ï¼šProvider
- **åˆ†äº«**ï¼šshare_plus

### AI æœåŠ¡
- **MiniMax LLM** (MiniMax-Text-01) - å¿ƒæƒ…åˆ†æå’Œæ­Œè¯ç”Ÿæˆ
- **MiniMax Music API** (music-2.0) - éŸ³ä¹ç”Ÿæˆ

## ğŸ“‹ API æ¥å£

### ç”ŸæˆéŸ³ä¹

```
POST /generate
Content-Type: multipart/form-data

å‚æ•°ï¼š
- api_key: MiniMax API Keyï¼ˆstringï¼‰
- mood: ç”¨æˆ·å¿ƒæƒ…æè¿°ï¼ˆstringï¼‰

å“åº”ï¼š
{
  "status": "success",
  "message": "éŸ³ä¹ç”ŸæˆæˆåŠŸ",
  "file_url": "/download/{session_id}/{filename}",
  "prompt": "éŸ³ä¹é£æ ¼æè¿°",
  "lyrics": "ç”Ÿæˆçš„æ­Œè¯"
}
```

### ä¸‹è½½/æ’­æ”¾éŸ³ä¹

```
GET /download/{session_id}/{filename}
```

### å¥åº·æ£€æŸ¥

```
GET /health
```

## ğŸ¨ ç•Œé¢ç‰¹æ€§

### Web ç‰ˆ
- ç²‰çº¢è‰²æ¸å˜ä¸»é¢˜è®¾è®¡
- æµç•…çš„åŠ¨ç”»æ•ˆæœ
- ç°ä»£åŒ–å¡ç‰‡å¼å¸ƒå±€
- ç§»åŠ¨ç«¯å‹å¥½çš„å“åº”å¼è®¾è®¡
- å¯†ç è¾“å…¥æ¡†ä¿æŠ¤ API Key

### Android ç‰ˆ
- ç²‰çº¢è‰²ä¸»é¢˜ï¼ˆ#FF6B9D, #FFC3E1, #FFE5F1ï¼‰
- Material Design 3 è®¾è®¡è¯­è¨€
- æµç•…çš„è¿›åº¦æŒ‡ç¤ºå™¨
- å¯è§†åŒ–æ­¥éª¤å±•ç¤º
- å†…ç½®éŸ³é¢‘æ’­æ”¾å™¨

## ğŸ”’ å®‰å…¨è¯´æ˜

- API Key åœ¨å‰ç«¯è¾“å…¥ï¼Œä¸å­˜å‚¨åœ¨æœåŠ¡å™¨
- API Key ä½¿ç”¨å¯†ç è¾“å…¥æ¡†ç±»å‹ï¼Œä¸ä¼šæ˜æ–‡æ˜¾ç¤º
- ç”Ÿæˆçš„éŸ³ä¹æ–‡ä»¶ä¸´æ—¶ä¿å­˜åœ¨æœåŠ¡å™¨
- å»ºè®®å®šæœŸæ¸…ç† `temp_sessions` ç›®å½•
- Android ç‰ˆæœ¬åœ°å­˜å‚¨ä½¿ç”¨ shared_preferences åŠ å¯†

## ğŸ“± Android å¼€å‘

### æœ¬åœ°ç¼–è¯‘ APK

```bash
cd mood_music_app
flutter pub get
flutter build apk --release --split-per-abi
```

ç¼–è¯‘åçš„ APK ä½äºï¼š
```
mood_music_app/build/app/outputs/flutter-apk/
```

### è‡ªåŠ¨åŒ–æ„å»º

é¡¹ç›®ä½¿ç”¨ GitHub Actions è‡ªåŠ¨æ„å»º APKï¼š

- **è§¦å‘æ¡ä»¶**ï¼šæ¨é€åˆ° master åˆ†æ”¯ä¸”ä¿®æ”¹äº† `mood_music_app/` ç›®å½•
- **æ‰‹åŠ¨è§¦å‘**ï¼šåœ¨ GitHub Actions é¡µé¢ç‚¹å‡» "Run workflow"
- **äº§ç‰©**ï¼šè‡ªåŠ¨åˆ›å»º Release å¹¶ä¸Šä¼  APK æ–‡ä»¶

æŸ¥çœ‹æ„å»ºçŠ¶æ€ï¼š[GitHub Actions](https://github.com/MiniMax-OpenPlatform/mood-music-generator/actions)

## ğŸ› å¸¸è§é—®é¢˜

### Q: API è°ƒç”¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®ï¼Œç¡®è®¤ MiniMax è´¦æˆ·æœ‰è¶³å¤Ÿä½™é¢ã€‚æŸ¥çœ‹ trace_id è¿›è¡Œé—®é¢˜è¯Šæ–­ã€‚

### Q: éŸ³ä¹ç”Ÿæˆå¾ˆæ…¢ï¼Ÿ
A: éŸ³ä¹ç”Ÿæˆé€šå¸¸éœ€è¦ 30-120 ç§’ï¼Œè¿™æ˜¯æ­£å¸¸ç°è±¡ã€‚è¯·è€å¿ƒç­‰å¾…ã€‚

### Q: Android ç‰ˆå®‰è£…å¤±è´¥ï¼Ÿ
A:
1. ç¡®è®¤ä¸‹è½½äº†æ­£ç¡®æ¶æ„çš„ APKï¼ˆæ¨è arm64-v8aï¼‰
2. åœ¨è®¾ç½®ä¸­å…è®¸å®‰è£…æœªçŸ¥æ¥æºçš„åº”ç”¨
3. æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´

### Q: å¦‚ä½•éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Ÿ
A: å»ºè®®ä½¿ç”¨ Nginx + Gunicorn/Uvicornï¼Œå¹¶æ·»åŠ é€‚å½“çš„é™æµå’Œç¼“å­˜ç­–ç•¥ã€‚

### Q: ç«¯å£è¢«å ç”¨ï¼Ÿ
A: ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„ PORT å€¼ï¼Œæˆ–ä½¿ç”¨ `uvicorn main:app --port å…¶ä»–ç«¯å£`

### Q: å¦‚ä½•æŸ¥çœ‹ API è°ƒç”¨çš„ trace_idï¼Ÿ
A: Android ç‰ˆä¼šåœ¨ç»“æœé¡µé¢åº•éƒ¨æ˜¾ç¤º LLM å’Œ Music API çš„ trace_idï¼Œå¯ç”¨äºè°ƒè¯•å’Œå®¢æœå’¨è¯¢ã€‚

## ğŸš€ åå°è¿è¡Œ Web æœåŠ¡

### ä½¿ç”¨ nohup

```bash
nohup python3 main.py > app.log 2>&1 &
```

### ä½¿ç”¨ screen

```bash
screen -S music-app
python3 main.py
# æŒ‰ Ctrl+A ç„¶åæŒ‰ D åˆ†ç¦»ä¼šè¯

# æ¢å¤ä¼šè¯
screen -r music-app
```

### åœæ­¢æœåŠ¡

```bash
# æŸ¥æ‰¾è¿›ç¨‹
ps aux | grep main.py

# åœæ­¢è¿›ç¨‹
kill <è¿›ç¨‹ID>

# æˆ–ä½¿ç”¨ pkill
pkill -f "python3 main.py"
```

## ğŸ“Š ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. ä½¿ç”¨åå‘ä»£ç†ï¼ˆNginxï¼‰
2. æ·»åŠ  HTTPS æ”¯æŒ
3. å®ç°é€Ÿç‡é™åˆ¶ï¼ˆé˜²æ­¢ API æ»¥ç”¨ï¼‰
4. å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶
5. æ·»åŠ æ—¥å¿—è®°å½•
6. ä½¿ç”¨è¿›ç¨‹ç®¡ç†å™¨ï¼ˆsystemd æˆ– supervisorï¼‰
7. æ·»åŠ ç”¨æˆ·è®¤è¯ï¼ˆå¯é€‰ï¼‰

## ğŸ”„ æŒç»­é›†æˆ/éƒ¨ç½²

é¡¹ç›®ä½¿ç”¨ GitHub Actions å®ç°è‡ªåŠ¨åŒ–æ„å»ºï¼š

- **Android APK**ï¼šè‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒåˆ° Releases
- **iOS IPA**ï¼šè‡ªåŠ¨æ„å»ºï¼ˆæœªç­¾åï¼Œéœ€è¦æ‰‹åŠ¨ç­¾åï¼‰

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

- [MiniMax AI](https://www.minimaxi.com) - æä¾›å¼ºå¤§çš„ AI èƒ½åŠ›
- FastAPI - ç°ä»£åŒ–çš„ Python Web æ¡†æ¶
- Flutter - ä¼˜ç§€çš„è·¨å¹³å°ç§»åŠ¨å¼€å‘æ¡†æ¶

## ğŸ“ æ”¯æŒä¸åé¦ˆ

- é—®é¢˜åé¦ˆï¼š[GitHub Issues](https://github.com/MiniMax-OpenPlatform/mood-music-generator/issues)
- MiniMax API æ–‡æ¡£ï¼š[å¹³å°æ–‡æ¡£](https://platform.minimaxi.com/docs)
